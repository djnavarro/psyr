<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Week 2</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<!-- ###### start inserted header ##### -->

<!-- add plausible.io -->
<script async defer data-domain="psyr.djnavarro.net" src="https://plausible.io/js/plausible.js"></script>

<!-- add fontawesome -->
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">

<!-- add the twitter card and open graph tags -->
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@djnavarro">
<meta property="og:url" content="https://psyr.org">
<meta property="og:title" content="R for Psychological Science">
<meta property="og:description" content="An introductory resource">
<meta property="og:image" content="http://psyr.org/img/splash_turtle.png">

<!-- ###### end inserted header ##### -->

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>





<link rel="stylesheet" href="mystyle.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">R for Psychological Science</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Core
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="getting-started.html">Getting started</a>
    </li>
    <li>
      <a href="variables.html">Variables</a>
    </li>
    <li>
      <a href="scripts.html">Scripts</a>
    </li>
    <li>
      <a href="packages.html">Packages</a>
    </li>
    <li>
      <a href="workspaces.html">Workspaces</a>
    </li>
    <li>
      <a href="vectors.html">Vectors</a>
    </li>
    <li>
      <a href="loops.html">Loops</a>
    </li>
    <li>
      <a href="branches.html">Branches</a>
    </li>
    <li>
      <a href="functions.html">Functions</a>
    </li>
    <li>
      <a href="programming.html">Programming</a>
    </li>
    <li>
      <a href="file-system.html">File system</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Data
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="prelude-to-data.html">Prelude</a>
    </li>
    <li>
      <a href="data-types.html">Data types</a>
    </li>
    <li>
      <a href="describing-data.html">Describing data</a>
    </li>
    <li>
      <a href="visualising-data.html">Visualising data</a>
    </li>
    <li>
      <a href="manipulating-data.html">Manipulating data</a>
    </li>
    <li>
      <a href="working-with-text.html">Text data</a>
    </li>
    <li>
      <a href="import-export.html">Import/export</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Stats
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="probability.html">Probability distributions</a>
    </li>
    <li>
      <a href="introductory-statistics.html">Introductory statistics</a>
    </li>
    <li>
      <a href="intermediate-statistics.html">Intermediate statistics</a>
    </li>
    <li>
      <a href="advanced-statistics.html">Advanced statistics</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    More
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="experiments.html">Experiments</a>
    </li>
    <li>
      <a href="shiny.html">Shiny apps</a>
    </li>
    <li>
      <a href="web-scraping.html">Web scraping</a>
    </li>
    <li>
      <a href="xx-miscellaneous.html">Miscellaneous</a>
    </li>
    <li>
      <a href="backprop.html">Backpropagation networks</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://compcogscisydney.org">compcogscisydney.org</a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Week 2</h1>

</div>


<div id="revision-from-last-week" class="section level2">
<h2>Revision from last week</h2>
<p>In week 1 we talked about getting started in R, the role it can play for psychology, and made our first attempt to learn how to use the language. We went through these slides and sections, and the “homework” exercise was to try to make sure we all have a basic understanding of these sections:</p>
<ul>
<li><a href="./docs/overview.pdf">slides</a></li>
<li><a href="./getting-started.html">getting started</a></li>
<li><a href="./variables.html">variables</a></li>
<li><a href="./scripts.html">scripts</a></li>
<li><a href="./packages.html">packages</a></li>
</ul>
<p>So the place we’ll start this week is with “revision” (which in my experience is a terrible name to describe something important… which isn’t just about revisiting something you already know, but also a mechanism for talking about stuff that didn’t make sense the first time). Here are a few exercises that I’d like you to try:</p>
<div id="exercise-1" class="section level3">
<h3>Exercise 1</h3>
<p>Write a script that does the following</p>
<ul>
<li>Calculate the number of seconds in a year, stores to variable &amp; prints it</li>
<li>Calculate the number of hours (approx) since the 0AD, stores to variable &amp; prints it</li>
<li>Which number is bigger? Use logical operations test this and print the answer on screen</li>
<li>Add some comments to your script so make it easier to</li>
</ul>
<p>Save your script to a file like <code>week2_ex1.R</code></p>
</div>
<div id="exercise-2" class="section level3">
<h3>Exercise 2</h3>
<p>Write a new script called <code>week2_ex2.R</code> (or whatever) that does the following</p>
<ul>
<li>Stores the names of your family members as a character vector called <code>names</code></li>
<li>Stores the ages of the family members as a numeric vector called <code>ages</code></li>
<li>Use logical indexing to print your age… age[names == “dani”]</li>
</ul>
</div>
<div id="exercise-3" class="section level3">
<h3>Exercise 3</h3>
<p>Make sure that the <code>TurtleGraphics</code> package is installed on your machine, by typing <code>library(TurtleGraphics)</code> at the console. If it works, great! Move on to Exercise 4. If it does not, here are the commands we need</p>
<pre class="r"><code>install.packages(&quot;devtools&quot;)
library(devtools)
install_github(&quot;djnavarro/TurtleGraphics&quot;)
library(TurtleGraphics)</code></pre>
</div>
<div id="exercise-4" class="section level3">
<h3>Exercise 4</h3>
<p>Create a new script called <code>week2_turtle.R</code>. It should do this:</p>
<ul>
<li>line 1: load the <code>TurtleGraphics</code> package</li>
<li>line 2: initialise the turtle using <code>turtle_init()</code></li>
<li>line 3: move the turtle forward a distance of 5 units</li>
</ul>
<p>A question you should consider: why did I ask you to include line 1, given that you’ve already done exercise 3???</p>
</div>
</div>
<div id="programming-concepts" class="section level2">
<h2>Programming concepts</h2>
<p>The main goal this week is to cover some key R concepts and programming ideas. We’ll go through these sections in turn, each of which ends with some exercises.</p>
<ul>
<li><a href="./workspaces.html">workspaces</a></li>
<li><a href="./loops.html">loops</a></li>
<li><a href="./branches.html">branches</a></li>
<li><a href="./functions.html">functions</a></li>
</ul>
<p>At the end of this, we reach the point that the turtle draws a pretty picture. Your main exercise here is to try to modify what picture it draws!</p>
</div>
<div id="getting-started-with-data" class="section level2">
<h2>Getting started with data!</h2>
<p>I’m not sure how this will all work out time-wise, but if we do have time we’ll follow this up by getting started on the “working with data” section of the notes. We’ll start at the prelude, and talk briefly about some of the data types.</p>
<p>Here are some additional exercises:</p>
<pre class="r"><code>library(tidyverse)</code></pre>
<p>Reading a <em>data frame</em> from an online CSV file. We’re taking a tidyverse approach so strictly speaking we have a tibble rather than a pure data frame!</p>
<pre class="r"><code>books &lt;- read_csv(file = &quot;http://psyr.djnavarro.net/data/booksales.csv&quot;)</code></pre>
<pre><code>## 
## ── Column specification ────────────────────────────────────────
## cols(
##   Month = col_character(),
##   Days = col_double(),
##   Sales = col_double(),
##   Stock.Levels = col_character()
## )</code></pre>
<pre class="r"><code>class(books)</code></pre>
<pre><code>## [1] &quot;spec_tbl_df&quot; &quot;tbl_df&quot;      &quot;tbl&quot;         &quot;data.frame&quot;</code></pre>
<pre class="r"><code>head(books)</code></pre>
<pre><code>## # A tibble: 6 x 4
##   Month     Days Sales Stock.Levels
##   &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;       
## 1 January     31     0 high        
## 2 February    28   100 high        
## 3 March       31   200 low         
## 4 April       30    50 out         
## 5 May         31     0 out         
## 6 June        30     0 high</code></pre>
<p>“Inside” a data frame are just regular vectors:</p>
<pre class="r"><code>print(books$Sales)</code></pre>
<pre><code>##  [1]   0 100 200  50   0   0   0   0   0   0   0   0</code></pre>
<p>To see how data frames are just regular vectors bound together, create one:</p>
<pre class="r"><code>names &lt;- c(&quot;Granny&quot;,&quot;Nanny&quot;,&quot;Magrat&quot;)
ages &lt;- c(70, 70, 30)

family &lt;- tibble(names, ages)
print(family)</code></pre>
<pre><code>## # A tibble: 3 x 2
##   names   ages
##   &lt;chr&gt;  &lt;dbl&gt;
## 1 Granny    70
## 2 Nanny     70
## 3 Magrat    30</code></pre>
<div id="extension-using-these-skills-to-check-data-sets" class="section level3">
<h3>Extension: Using these skills to “check” data sets</h3>
<p>A data manipulation exercise… data from multiple people, but might be missing cases! First read one data set to take a look:</p>
<pre class="r"><code>subj1 &lt;- read_csv(file = &quot;http://psyr.djnavarro.net/data/subj1.csv&quot;)</code></pre>
<pre><code>## 
## ── Column specification ────────────────────────────────────────
## cols(
##   response = col_double(),
##   word = col_character()
## )</code></pre>
<pre class="r"><code>print(subj1)</code></pre>
<pre><code>## # A tibble: 10 x 2
##    response word 
##       &lt;dbl&gt; &lt;chr&gt;
##  1        1 blah 
##  2        2 blah 
##  3        3 blah 
##  4        4 blah 
##  5        5 blah 
##  6        6 blah 
##  7        7 blah 
##  8        8 blah 
##  9        9 blah 
## 10       10 blah</code></pre>
<p>Next, define a function to “check” if a data frame has the correct number of cases</p>
<pre class="r"><code>check_file &lt;- function(dataset) {
  n_cases &lt;- dim(dataset)[1] # number of cases in the data frame
  is_okay &lt;- n_cases == 10 # file is okay if it has 10 observations
  return(is_okay)
}</code></pre>
<p>Create a vector listing the files we want to check</p>
<pre class="r"><code>file_list &lt;- c(
  &quot;http://psyr.djnavarro.net/data/subj1.csv&quot;,
  &quot;http://psyr.djnavarro.net/data/subj2.csv&quot;,
  &quot;http://psyr.djnavarro.net/data/subj3.csv&quot;,
  &quot;http://psyr.djnavarro.net/data/subj4.csv&quot;
)</code></pre>
<p>Write a loop that checks the functions one at a time</p>
<pre class="r"><code>for(file in file_list) {
  dat &lt;- read_csv(file)
  is_okay &lt;- check_file(dat)
  if( !is_okay ) {
    print(file)
  }
}</code></pre>
<pre><code>## [1] &quot;http://psyr.djnavarro.net/data/subj3.csv&quot;</code></pre>
<p>Make sure all three code fragments are in a single file and run it!</p>
</div>
</div>
<div id="further-extension" class="section level2">
<h2>Further extension</h2>
<p>Eek what if there are 400 files! (there actually are!). I refuse to type all that into a long list, use text manipulation</p>
<pre class="r"><code>file_list &lt;- paste0(&quot;http://psyr.djnavarro.net/data/subj&quot;, 1:20, &quot;.csv&quot;)

for(file in file_list) {
  dat &lt;- read_csv(file)
  is_okay &lt;- check_file(dat)
  if( !is_okay ) {
    print(file)
  } else{ 
    print(&quot;ok&quot;)}
}</code></pre>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
